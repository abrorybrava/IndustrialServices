@{
    ViewData["Title"] = "Departement of Training and Production";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
    var httpcontext = ViewContext.HttpContext;
    string role = httpcontext.Session.GetString("Role");
    if (string.IsNullOrEmpty(role))
    {
        // Session is expired or role is not set, redirect to login layout
        Layout = null;

        <script>
            window.location.href = '@Url.Action("Index", "Login")';
        </script>

        return;
    }
    if (role == "Admin")
    {
        Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
    }

}
<link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.js"></script>


<div class="container-md d-flex justify-content-center align-items-center" style="padding-bottom:30px;">
    <div class="container-fluid text-center">
        <h2 style="padding:10px; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif">The Services We Provide</h2>
    </div>
</div>

    <div class="row justify-content-center">

        <div class="col-lg-3">

            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Training</h5>

                <div class="list-group">
                    <button type="button" class="list-group-item list-group-item-action training">Training</button>
                </div><!-- End List group with Links and buttons -->

                </div>
            </div>

    </div>

    <div class="col-lg-3">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Products</h5>

                <div class="list-group">
                    <button type="button" class="list-group-item list-group-item-action ourProducts">Our products..</button>
                    <button type="button" class="list-group-item list-group-item-action fasilitas">Facilities</button>
                </div><!-- End List group with Links and buttons -->

                </div>
            </div>
        </div>
</div>



<section class="section">
    <div class="tableProduct" style="display:none;">
        <div class="pagetitle">
            <h1>Products</h1>
        </div><!-- End Page Title -->
        <div class="row">
            <div class="col-lg-12">

                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Product Data</h5>
                        <a class="btn btn-primary addProduct">+ Add New Product</a>
                         <a class="btn btn-success" asp-action="Index" asp-controller="TipeProduk">Manage Type of Products</a>
                        <table class="table datatable">
                            <thead>
                                <tr>
                                    <th scope="col">No</th>
                                    <th scope="col">Product Name</th>
                                    <th scope="col">Product Type</th>
                                    <th scope="col">Ordered by</th>
                                    <th scope="col">Action</th>
                                </tr>
                            </thead>
                            <tbody id="tbodyProducts">

                            </tbody>
                        </table>

                    </div>
                </div>

            </div>
        </div>
    </div>



    <div class="tableFacilities" style="display:none;">
        <div class="pagetitle">
            <h1>Products</h1>
        </div><!-- End Page Title -->
        <div class="row">
            <div class="col-lg-12">

                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Facilities Data</h5>
                        <a class="btn btn-primary addFasilitas">+ Add New Facility</a>
                        <a class="btn btn-success" asp-controller="TipeFasilitas" asp-action="Index">Manage Type of Facility</a>
                        <table class="table datatable">

                            <thead>
                                <tr>
                                    <th scope="col">No</th>
                                    <th scope="col">Facilities Name</th>
                                    <th scope="col">Type of Facilities</th>
                                    <th scope="col">Action</th>
                                </tr>
                            </thead>
                            <tbody id="tbodyFasilitas">
                                <!-- Data artikel akan ditambahkan di sini -->
                            </tbody>

                        </table>

                    </div>
                </div>

            </div>
        </div>
    </div>

        <div class="tableTraining" style="display:none;">
        <div class="pagetitle">
            <h1>Training</h1>
        </div><!-- End Page Title -->
        <div class="row">
            <div class="col-lg-12">

                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Training Data</h5>
                        <a class="btn btn-primary addPelatihan">+ Add New Training</a>
                        <a class="btn btn-success" asp-controller="TipePelatihan" asp-action="Index">Manage Type of Training</a>
                        <table class="table datatable">

                            <thead>
                                <tr>
                                    <th scope="col">No</th>
                                    <th scope="col">Training Name</th>
                                    <th scope="col">Training Start Date</th>
                                    <th scope="col">Training End Date</th>
                                    <th scope="col">Training Type</th>
                                    <th scope="col">Action</th>
                                </tr>
                            </thead>
                            <tbody id="tbodyTraining">
                                <!-- Data artikel akan ditambahkan di sini -->
                            </tbody>

                        </table>

                    </div>
                </div>

            </div>
        </div>
    </div>
</section>

<script>

    //Start Products DOM JQUERY
    loadProducts()
    loadFasilitas()
    loadPelatihan()
function loadProducts() {
    var hostname = "https://localhost:7033/";
    var url = hostname + "GetAllProduk";
    var method = "GET";

    $.ajax({
        url: url,
        method: method,
        contentType: "application/json",
        success: function (data) {
            // Check if the response data is an array
            if (Array.isArray(data)) {
                // Iterate through each product in the response
                data.forEach(function (product, index) {
                    // Fetch additional details for the Tipe_Produk based on id_tipe_produk
                    $.ajax({
                        url: hostname + "GetTipeProduk?id=" + product.id_tipe_produk,
                        method: "GET",
                        contentType: "application/json",
                        success: function (tipeProdukDetails) {
                            // Assuming tipeProdukDetails contains the necessary data
                            var tipe_produk = tipeProdukDetails.tipe_produk;

                            // Build the table row
                            var newRow = '<tr>' +
                                '<td>' + (index + 1) + '</td>' +
                                '<td>' + product.nama_produk + '</td>' +
                                '<td>' + tipe_produk + '</td>' +
                                '<td>' + product.pesanan + '</td>' +
                                '<td>' +
                                '<button class="btn btn-success showFotoProduk" data-id_produk="' + product.id_produk + '"><i class="fa-regular fa-image"></i></button>' +
                                '<button class="btn btn-primary editProduct" data-id_produk="' + product.id_produk + '"><i class="fas fa-edit"></i></button>' +
                                '<button class="btn btn-danger" value="' + product.id_produk + '" onclick="hapusProduk(this.value)"><i class="fas fa-trash"></i></button>' +
                                '</td>' +
                                '</tr>';

                            // Append the row to the table body
                            $('#tbodyProducts').append(newRow);

                            // Attach event listener for the edit button
                            $('.editProduct[data-id_produk="' + product.id_produk + '"]').click(function () {
                                var id_produk = $(this).data("id_produk");
                                loadEditProduct(id_produk);
                            });
                        },
                        error: function (xhr, status, error) {
                            console.error("Error fetching Tipe_Produk details:", error);
                        }
                    });
                });
            } else {
                console.error("Invalid data format");
            }
        },
        error: function (xhr, status, error) {
            console.error("Error:", error);
        }
    });
}


    function simpanProduk() {
        var nama_produk = document.getElementById("nama_produk").value;
        var id_tipe_produk = document.getElementById("id_tipe_produk").value;
        var pesanan = document.getElementById("pesanan").value;
        var deskripsi_produk = document.getElementsByName("deskripsi_produk")[0].value;
        var status = document.getElementById("status").value;

        // Array untuk menyimpan nama file unik yang dihasilkan oleh GUID
        var fotoPaths = [];

        var fileInputs = [
            document.getElementById("addphoto1"),
            document.getElementById("addphoto2"),
            document.getElementById("addphoto3"),
            document.getElementById("addphoto4"),
            document.getElementById("addphoto5")
        ];

        fileInputs.forEach(function (fileInput) {
            var file = fileInput.files[0];
            if (file) {
                var uniqueFileName = guid(32, file) + "_" + getFileNameFromPath(fileInput.value);
                fotoPaths.push(uniqueFileName);
            }
        });

        var hostname = "https://localhost:7033/";
        var url = hostname + "InsertProduk";
        var method = "POST";
        if (nama_produk == '' || id_tipe_produk == '' || pesanan == '' || deskripsi_produk == '' || fotoPaths[0] == null) {
            Swal.fire({
                
                icon: 'error',
                title: 'Warning!',
                text: 'Please fill in all fields!',
            });
            return; // Keluar dari fungsi jika NPK bukan angka
        }
        // Data untuk pengiriman informasi produk
        var productData = {
            nama_produk: nama_produk,
            id_tipe_produk: id_tipe_produk,
            pesanan: pesanan,
            deskripsi_produk: deskripsi_produk,
            status: status
        };

        // Kirim permintaan AJAX untuk menyimpan data produk dan foto-fotonya secara terpisah
        if (fotoPaths.length != 0) {
            uploadPhoto(fileInputs, function (uniqueFileNames) {
                // Menggunakan nama file unik yang dihasilkan oleh GUID
                productData.fotoPaths = uniqueFileNames;

                $.ajax({
                    url: url,
                    method: method,
                    contentType: "application/json",
                    data: JSON.stringify(productData),
                    success: function (data) {
                        console.log("Data produk berhasil disimpan:", data);
                        location.reload(); // Opsional: Jika Anda ingin memuat ulang halaman
                    },
                    error: function (xhr, status, error) {
                        console.error(xhr.responseText);
                        // Handle error
                    }
                });
            });
        } else {
            // Jika foto_produk null, langsung menyimpan data tanpa mengunggah foto
            saveData();
        }
    }

    // Fungsi untuk mendapatkan nama file dari path lengkap
    function getFileNameFromPath(path) {
        return path.replace(/^.*[\\\/]/, '');
    }

    // Fungsi untuk mengirimkan foto ke server
function guid(length, file) {
    return Array.from({ length }, (_, index) => {
        const char = Math.floor(Math.random() * 36).toString(36);
        return index < 8 || index === 9 || index === 14 || index === 19 ? char : '-';
    }).join('');
}

    // Modifikasi pada fungsi uploadPhoto
    function uploadPhoto(fileInputs, callback) {
        var url = '/DPP/UploadPhoto';
        var uniqueFileNames = []; // Array to store unique filenames

        var filesToUpload = fileInputs.filter(function (fileInput) {
            return fileInput.files[0]; // Filter hanya file yang dipilih oleh pengguna
        });

        var uploadedCount = 0;

        filesToUpload.forEach(function (fileInput) {
            var file = fileInput.files[0];
            var maxSize = 7 * 1024 * 1024; // 10 MB

            // Pengecekan ukuran file
            if (file.size > maxSize) {
                Swal.fire({
                    icon: 'warning',
                    title: 'File Size Exceeded',
                    text: 'File size should not exceed 7 MB.'
                });
                // Tidak melanjutkan proses upload jika ukuran file melebihi batas
                location.reload();
            }
            var formData = new FormData();
            var uniqueFileName = guid(32, file) + "_" + file.name; // Menggunakan GUID panjang 32 karakter
            uniqueFileNames.push(uniqueFileName); // Store the unique filename
            formData.append('foto', file, uniqueFileName);

            $.ajax({
                url: url,
                method: 'POST',
                contentType: false,
                processData: false,
                data: formData,
                success: function (response) {
                    console.log("Foto berhasil diunggah:", response);
                    uploadedCount++;

                    // Trigger callback setelah semua file diunggah
                    if (uploadedCount === filesToUpload.length) {
                        callback(uniqueFileNames.join(',')); // Convert array to a comma-separated string
                        sendPhotoProduk(uniqueFileNames);
                    }
                },
                error: function (xhr, status, error) {
                    console.error("Error uploading photo:", error);
                    // Handle errors if needed
                }
            });
        });
    }




    function sendPhotoProduk(photoPaths) {
        var hostname = 'https://localhost:7033/'; // Ganti dengan URL untuk mengunggah foto
        var url = hostname + "SendPhotoProduk";

        var fotoProdukArray = [];

        photoPaths.forEach(function (photoPath) {
            var fotoProduk = {
                path_foto_produk: photoPath,
                status: 1 // Atur status yang sesuai jika diperlukan
            };

            fotoProdukArray.push(fotoProduk);
        });
        console.log(fotoProdukArray)

        $.ajax({
            url: url,
            method: "POST",
            contentType: "application/json",
            data: JSON.stringify(fotoProdukArray),
            success: function (data) {
                console.log("Foto berhasil diunggah:", data);
            },
            error: function (xhr, status, error) {
                console.error("Error uploading photo:", error);
                // Handle error
            }
        });
    }

    function saveData() {
        alert('warning')
        console.log("Simpan data tanpa foto");
    }

function hapusProduk(id) {
    Swal.fire({
        title: 'Are you sure?',
        text: 'You won\'t be able to revert this!',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Yes, delete it!'
    }).then((result) => {
        if (result.isConfirmed) {
            performDeletion1(id);
        }
    });

    function performDeletion1(id) {
        var hostname = "https://localhost:7033/";
        var url = hostname + "DeleteProduk?id=" + id;
        var method = "POST";
        $.ajax({
            url: url,
            method: method,
            contentType: "application/json",
            success: function (data) {
                Swal.fire(
                    'Deleted!',
                    'Your data has been deleted.',
                    'success'
                ).then(() => {
                    location.reload(); // Reload the page after deletion
                });
            },
            error: function (xhr, status, error) {
                console.error("Error:", error);
                Swal.fire(
                    'Error!',
                    'Failed to delete data.',
                    'error'
                );
            }
        });
    }
}


    function updateProduct() {
        var id_produk = document.getElementById("editid_produk").value;
        var nama_produk = document.getElementById("editnama_produk").value;
        var id_tipe_produk = document.getElementById("editid_tipe_produk").value;
        var pesanan = document.getElementById("editpesanan").value;
        var deskripsi_produk = document.getElementsByName("editdeskripsi_produk")[0].value;
        var status = document.getElementById("editstatus_produk").value;

        var hostname = "https://localhost:7033/";
        var url = hostname + "UpdateProduk";
        var method = "POST";
        var input = {
            id_produk: id_produk,
            nama_produk: nama_produk,
            id_tipe_produk: id_tipe_produk,
            pesanan: pesanan,
            deskripsi_produk: deskripsi_produk,
            status: status
        };

                if (nama_produk == '' || id_tipe_produk == '' || pesanan == '' || deskripsi_produk == '') {
            Swal.fire({
                icon: 'error',
                title: 'Warning!',
                text: 'Please fill in all fields!',
            });
            return; // Keluar dari fungsi jika NPK bukan angka
        }

        $.ajax({
            url: url,
            method: method,
            data: JSON.stringify(input),
            contentType: "application/json",
            success: function (data) {
                console.log("Data produk berhasil diperbarui:", data);
                $('#editProductModal').modal('hide');
                $('.tableTraining').hide();
                $('.tableProduct').show();
                location.reload();
            },
            error: function (xhr, status, error) {
                console.error(xhr.responseText);
                // Handle error
            }
        });
    }

    function loadEditProduct(id_produk) {
        var hostname = "https://localhost:7033/";
        var url = hostname + "GetProduk?id=" + id_produk;
        var method = "GET";
        var elements = document.getElementsByName("editdeskripsi_produk")[0];
        $('#editdeskripsi_produk').summernote('destroy');
        $.ajax({
            url: url,
            method: method,
            contentType: "application/json",
            success: function (data) {
                var product = data;
                $('#editid_produk').val(product.id_produk);
                $('#editnama_produk').val(product.nama_produk);
                $('#editid_tipe_produk').val(product.id_tipe_produk);
                $('#editpesanan').val(product.pesanan);
                elements.innerHTML = product.deskripsi_produk;
                $('#editstatus_produk').val(product.status);
                $('#editdeskripsi_produk').summernote();
                // Menampilkan modal pop-up untuk edit
                $('#editProductModal').modal('show');
            }
        });
    }


    $(document).ready(function () {
        // Event listener untuk menampilkan foto produk ketika tombol showFotoProduk ditekan
        $(document).on('click', '.showFotoProduk', function () {
            var productId = $(this).data('id_produk'); // Mendapatkan id_produk dari atribut data
            var hostname = "https://localhost:7033/";
            var url = hostname + "GetPhotoProduk?id=" + productId;
            var method = "GET";

            // Ajax request untuk mendapatkan foto produk berdasarkan id_produk
            $.ajax({
                url: url,
                method: method,
                contentType: "application/json",
                success: function (data) {
                    // Jika panggilan berhasil, data akan berisi daftar foto produk
                    var fotoProduk = data;

                    // Kosongkan konten sebelum menambahkan data baru
                    $("#showFotoProduct").empty();

                    // Perulangan untuk menampilkan path_foto_produk ke dalam modal pop-up
                    $.each(fotoProduk, function (index, foto) {
                        // Tambahkan data path_foto_produk ke dalam elemen div di dalam modal pop-up
                        var fotoHtml = '<div class="foto-item">' +
                            '<p>Photo Produk ' + (index + 1) + '</p>' +
                            '<img src="/assets/img/' + foto.path_foto_produk + '" alt="Foto Produk" width="70" height="70">' +
                            '</div>';
                        $("#showFotoProduct").append(fotoHtml);
                    });

                    // Tampilkan modal pop-up setelah mendapatkan dan menambahkan foto produk
                    $('#showPhotoProductModal').modal('show');
                },
                error: function (xhr, status, error) {
                    // Tangani kesalahan jika panggilan gagal
                    console.error(error);
                }
            });
        });
    });



    $('.addProduct').click(function () {
                $('#summernote').summernote('destroy');
        $('#summernote').summernote();
        $("#addProductModal").modal("show");
    });
loadTipeProdukOptions();
    function loadTipeProdukOptions() {
        var hostname = "https://localhost:7033/";
        var url = hostname + "GetAllTipeProduk"; // Sesuaikan dengan endpoint Anda
        var method = "GET";

        $.ajax({
            url: url,
            method: method,
            contentType: "application/json",
            success: function (data) {
                var tipeProdukList = data;

                // Kosongkan opsi pada elemen <select>
                $('#id_tipe_produk').empty();
                $('#editid_tipe_produk').empty();
                $('#id_tipe_produk').append($('<option></option>').text('Select Type of Product'));
                $('#editid_tipe_produk').append($('<option></option>').text('Select Type of Product'));

                // Tambahkan opsi dari data tipe_produk
                tipeProdukList.forEach(function (tipeProduk) {
                    var option = '<option value="' + tipeProduk.id_tipe_produk + '">' + tipeProduk.tipe_produk + '</option>';
                    $('#id_tipe_produk').append(option);
                });
                                tipeProdukList.forEach(function (tipeProduk) {
                    var option = '<option value="' + tipeProduk.id_tipe_produk + '">' + tipeProduk.tipe_produk + '</option>';
                    $('#editid_tipe_produk').append(option);
                });
            },
            error: function (xhr, status, error) {
                console.error("Error:", error);
            }
        });
    }

    //End Products DOM JQUERY


    // Start Fasilitas DOM JQUERY

function loadFasilitas() {
    var hostname = "https://localhost:7033/";
    var url = hostname + "GetAllFasilitas";
    var method = "GET";

    $.ajax({
        url: url,
        method: method,
        contentType: "application/json",
        success: function (data) {
            // Check if the response data is an array
            if (Array.isArray(data)) {
                // Iterate through each fasilitas in the response
                data.forEach(function (fasilitas, index) {
                    // Fetch additional details for the Tipe_Fasilitas based on id_tipe_fasilitas
                    $.ajax({
                        url: hostname + "GetTipeFasilitas?id=" + fasilitas.id_tipe_fasilitas,
                        method: "GET",
                        contentType: "application/json",
                        success: function (tipeFasilitasDetails) {
                            // Assuming tipeFasilitasDetails contains the necessary data
                            var tipe_fasilitas = tipeFasilitasDetails.tipe_fasilitas;

                            // Build the table row
                            var newRow = '<tr>' +
                                '<td>' + (index + 1) + '</td>' +
                                '<td>' + fasilitas.nama_fasilitas + '</td>' +
                                '<td>' + tipe_fasilitas + '</td>' +
                                '<td>' +
                                '<button class="btn btn-success showPhotoFasilitas" data-id_fasilitas="' + fasilitas.id_fasilitas + '"><i class="fa-regular fa-image"></i></button>' +
                                '<button class="btn btn-primary editFasilitas" data-id_fasilitas="' + fasilitas.id_fasilitas + '"><i class="fas fa-edit"></i></button>' +
                                '<button class="btn btn-danger" value="' + fasilitas.id_fasilitas + '" onclick="hapusFasilitas(this.value)"><i class="fas fa-trash"></i></button>' +
                                '</td>' +
                                '</tr>';

                            // Append the row to the table body
                            $('#tbodyFasilitas').append(newRow);

                            // Attach event listener for the edit button
                            $('.editFasilitas[data-id_fasilitas="' + fasilitas.id_fasilitas + '"]').click(function () {
                                var id_fasilitas = $(this).data("id_fasilitas");
                                loadEditFasilitas(id_fasilitas);
                            });
                        },
                        error: function (xhr, status, error) {
                            console.error("Error fetching Tipe_Fasilitas details:", error);
                        }
                    });
                });
            } else {
                console.error("Invalid data format");
            }
        },
        error: function (xhr, status, error) {
            console.error("Error:", error);
        }
    });
}


    // Fungsi untuk menyimpan mesin baru
    function simpanFasilitas() {
        var nama_fasilitas = document.getElementById("nama_fasilitas").value;
        var id_tipe_fasilitas = document.getElementById("id_tipe_fasilitas").value;
        var deskripsi_fasilitas = document.getElementsByName("deskripsi_fasilitas")[0].value;
        var status = document.getElementById("status_fasilitas").value;

        // Array untuk menyimpan nama file unik yang dihasilkan oleh GUID
        var fotoPaths = [];

        // Array untuk menyimpan objek file

        var fileInputs = [
            document.getElementById("photoFasilitas1"),
            document.getElementById("photoFasilitas2"),
            document.getElementById("photoFasilitas3"),
            document.getElementById("photoFasilitas4"),
            document.getElementById("photoFasilitas5")
        ];

        fileInputs.forEach(function (fileInput) {
            var file = fileInput.files[0];
            if (file) {
                var uniqueFileName = guid(32, file) + "_" + getFileNameFromPath(fileInput.value);
                fotoPaths.push(uniqueFileName);
            }
        });

        var hostname = "https://localhost:7033/";
        var url = hostname + "InsertFasilitas";
        var method = "POST";

        // Data yang akan dikirim
        var fasilitasData = {
            nama_fasilitas: nama_fasilitas,
            id_tipe_fasilitas: id_tipe_fasilitas,
            deskripsi_fasilitas: deskripsi_fasilitas,
            status: status
        };
                if (nama_fasilitas == '' || id_tipe_fasilitas == '' || deskripsi_fasilitas == '' || fotoPaths[0] == null) {
            Swal.fire({
                icon: 'error',
                title: 'Warning!',
                text: 'Please fill in all fields!',
            });
            return; // Keluar dari fungsi jika NPK bukan angka
        }
        // Mengirim permintaan AJAX untuk menyimpan data fasilitas
        if (fotoPaths.length != 0) {
            uploadPhoto2(fileInputs, function (uniqueFileNames) {
                fasilitasData.path_foto_fasilitas = uniqueFileNames;
                $.ajax({
                    url: url,
                    method: method,
                    contentType: "application/json",
                    data: JSON.stringify(fasilitasData),
                    success: function (data) {
                        console.log("Data fasilitas berhasil disimpan:", data);
                        location.reload();
                    },
                    error: function (xhr, status, error) {
                        console.error(xhr.responseText);
                        // Tangani error
                    }
                });
            });
        } else {
            saveData();
        }
    }

        function uploadPhoto2(fileInputs, callback) {
        var url = '/DPP/UploadPhoto';
        var uniqueFileNames = []; // Array to store unique filenames

        var filesToUpload = fileInputs.filter(function (fileInput) {
            return fileInput.files[0]; // Filter hanya file yang dipilih oleh pengguna
        });

        var uploadedCount = 0;

        filesToUpload.forEach(function (fileInput) {
            var file = fileInput.files[0];
            var maxSize = 7 * 1024 * 1024; // 10 MB

            // Pengecekan ukuran file
            if (file.size > maxSize) {
                Swal.fire({
                    icon: 'warning',
                    title: 'File Size Exceeded',
                    text: 'File size should not exceed 7 MB.'
                });
                // Tidak melanjutkan proses upload jika ukuran file melebihi batas
                location.reload();
            }
            var formData = new FormData();
            var uniqueFileName = guid(32, file) + "_" + file.name; // Menggunakan GUID panjang 32 karakter
            uniqueFileNames.push(uniqueFileName); // Store the unique filename
            formData.append('foto', file, uniqueFileName);

            $.ajax({
                url: url,
                method: 'POST',
                contentType: false,
                processData: false,
                data: formData,
                success: function (response) {
                    console.log("Foto berhasil diunggah:", response);
                    uploadedCount++;

                    // Trigger callback setelah semua file diunggah
                    if (uploadedCount === filesToUpload.length) {
                        callback(uniqueFileNames.join(',')); // Convert array to a comma-separated string
                        sendPhotoFasilitas(uniqueFileNames);
                    }
                },
                error: function (xhr, status, error) {
                    console.error("Error uploading photo:", error);
                    // Handle errors if needed
                }
            });
        });
    }


    function sendPhotoFasilitas(photoPaths) {
        var hostname = 'https://localhost:7033/'; // Ganti dengan URL untuk mengunggah foto
        var url = hostname + "SendPhotoFasilitas";

        var fotoFasilitasArray = [];

        photoPaths.forEach(function (photoPath) {
            var fotoFasilitas = {
                path_foto_fasilitas: photoPath,
                status: 1 // Atur status yang sesuai jika diperlukan
            };

            fotoFasilitasArray.push(fotoFasilitas);
        });
        console.log('nama ' + fotoFasilitasArray)

        $.ajax({
            url: url,
            method: "POST",
            contentType: "application/json",
            data: JSON.stringify(fotoFasilitasArray),
            success: function (data) {
                console.log("Foto fasilitas berhasil diunggah:", data);
            },
            error: function (xhr, status, error) {
                console.error("Error uploading photo fasilitas:", error);
                // Handle error
            }
        });
    }


    // Fungsi untuk menghapus mesin berdasarkan ID
    function hapusFasilitas(id) {
        Swal.fire({
            title: 'Are you sure?',
            text: 'You won\'t be able to revert this!',
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Yes, delete it!'
        }).then((result) => {
            if (result.isConfirmed) {
                performDeletion2(id);
            }
        });

        function performDeletion2(id) {
            var hostname = "https://localhost:7033/";
            var url = hostname + "DeleteFasilitas?id=" + id;
            var method = "POST";
            $.ajax({
                url: url,
                method: method,
                contentType: "application/json",
                success: function (data) {
                    Swal.fire(
                        'Deleted!',
                        'Your data has been deleted.',
                        'success'
                    ).then(() => {
                        location.reload(); // Reload the page after deletion
                    });
                },
                error: function (xhr, status, error) {
                    console.error("Error:", error);
                    Swal.fire(
                        'Error!',
                        'Failed to delete data.',
                        'error'
                    );
                }
            });
        }
    }


    // Fungsi untuk memuat data fasilitas yang akan diubah ke dalam form edit
function loadEditFasilitas(id_fasilitas) {
    var hostname = "https://localhost:7033/";
    var url = hostname + "GetFasilitas?id=" + id_fasilitas;
    var method = "GET";
    var elements = document.getElementsByName("editdeskripsi_fasilitas")[0];
        $('#editdeskripsi_fasilitas').summernote('destroy');

    $.ajax({
        url: url,
        method: method,
        contentType: "application/json",
        success: function (data) {
            var fasilitas = data;
            $('#editid_fasilitas').val(fasilitas.id_fasilitas);
            $('#editnama_fasilitas').val(fasilitas.nama_fasilitas);
            $('#editid_tipe_fasilitas').val(fasilitas.id_tipe_fasilitas);
            elements.innerHTML = fasilitas.deskripsi_fasilitas;
            $('#editstatus_fasilitas').val(fasilitas.status);
            $('#editdeskripsi_fasilitas').summernote();

            // Menampilkan modal pop-up untuk edit
            $('#editFasilitasModal').modal('show');
        }
    });
}

    // Fungsi untuk mengupdate fasilitas
    function updateFasilitas() {
        var id_fasilitas = document.getElementById("editid_fasilitas").value;
        var nama_fasilitas = document.getElementById("editnama_fasilitas").value;
        var id_tipe_fasilitas = document.getElementById("editid_tipe_fasilitas").value;
        var deskripsi_fasilitas = document.getElementsByName("editdeskripsi_fasilitas")[0].value;
        var status = document.getElementById("editstatus_fasilitas").value;

        var hostname = "https://localhost:7033/";
        var url = hostname + "UpdateFasilitas";
        var method = "POST";
        var input = {
            id_fasilitas: id_fasilitas,
            nama_fasilitas: nama_fasilitas,
            id_tipe_fasilitas: id_tipe_fasilitas,
            deskripsi_fasilitas: deskripsi_fasilitas,
            status: status,
            path_foto_fasilitas: ""
        };
                        if (nama_fasilitas == '' || id_tipe_fasilitas == '' || deskripsi_fasilitas == '') {
            Swal.fire({
                icon: 'error',
                title: 'Warning!',
                text: 'Please fill in all fields!',
            });
            return; // Keluar dari fungsi jika NPK bukan angka
        }
        $.ajax({
            url: url,
            method: method,
            data: JSON.stringify(input),
            contentType: "application/json",
            success: function (data) {
                $('#editFasilitasModal').modal('hide');
                location.reload(); // Opsional: Jika ingin memuat ulang halaman setelah update
            },
            error: function (xhr, status, error) {
                console.error(xhr.responseText);
                // Tangani error
            }
        });
    }

    // Event listener untuk tombol "Tambah Fasilitas"
    $('.addFasilitas').click(function () {
                        $('#deskripsi_fasilitas').summernote('destroy');
        $('#deskripsi_fasilitas').summernote();
        $("#addFasilitasModal").modal("show");
    });


    $(document).ready(function () {
        // Event listener untuk menampilkan foto fasilitas ketika tombol showFotoFasilitas ditekan
        $(document).on('click', '.showPhotoFasilitas', function () {
            var fasilitasId = $(this).data('id_fasilitas'); // Mendapatkan id_fasilitas dari atribut data
            var hostname = "https://localhost:7033/";
            var url = hostname + "GetPhotoFasilitas?id=" + fasilitasId;
            var method = "GET";

            // Ajax request untuk mendapatkan foto fasilitas berdasarkan id_fasilitas
            $.ajax({
                url: url,
                method: method,
                contentType: "application/json",
                success: function (data) {
                    // Jika panggilan berhasil, data akan berisi daftar foto fasilitas
                    var fotoFasilitas = data;

                    // Kosongkan konten sebelum menambahkan data baru
                    $("#showFotoFasilitas").empty();

                    // Perulangan untuk menampilkan path_foto_fasilitas ke dalam modal pop-up
                    $.each(fotoFasilitas, function (index, foto) {
                        // Tambahkan data path_foto_fasilitas ke dalam elemen div di dalam modal pop-up
                        var fotoHtml = '<div class="foto-item">' +
                            '<p>Photo Fasilitas ' + (index + 1) + '</p>' +
                            '<img src="/assets/img/' + foto.path_foto_fasilitas + '" alt="Foto Fasilitas" width="70" height="70">' +
                            '</div>';
                        $("#showFotoFasilitas").append(fotoHtml);
                    });

                    // Tampilkan modal pop-up setelah mendapatkan dan menambahkan foto fasilitas
                    $('#showPhotoFasilitasModal').modal('show');
                },
                error: function (xhr, status, error) {
                    // Tangani kesalahan jika panggilan gagal
                    console.error(error);
                }
            });
        });
    });

    loadTipeFasilitasOptions();
    function loadTipeFasilitasOptions() {
        var hostname = "https://localhost:7033/";
        var url = hostname + "GetAllTipeFasilitas"; // Sesuaikan dengan endpoint Anda
        var method = "GET";

        $.ajax({
            url: url,
            method: method,
            contentType: "application/json",
            success: function (data) {
                var tipeFasilitasList = data;

                // Kosongkan opsi pada elemen <select>
                $('#id_tipe_fasilitas').empty();
                $('#editid_tipe_fasilitas').empty();
                $('#id_tipe_fasilitas').append($('<option></option>').text('Select Type of Facility'));
                $('#editid_tipe_fasilitas').append($('<option></option>').text('Select Type of Facility'));

                // Tambahkan opsi dari data tipe_produk
                tipeFasilitasList.forEach(function (tipeFasilitas) {
                    var option = '<option value="' + tipeFasilitas.id_tipe_fasilitas + '">' + tipeFasilitas.tipe_fasilitas + '</option>';
                    $('#id_tipe_fasilitas').append(option);
                });
                                tipeFasilitasList.forEach(function (tipeFasilitas) {
                    var option = '<option value="' + tipeFasilitas.id_tipe_fasilitas + '">' + tipeFasilitas.tipe_fasilitas + '</option>';
                    $('#editid_tipe_fasilitas').append(option);
                });
            },
            error: function (xhr, status, error) {
                console.error("Error:", error);
            }
        });
    }

    //End Fasilitas DOM JQUERY

    //Start Pelatihan DOM JQUERY
function loadPelatihan() {
    var hostname = "https://localhost:7033/";
    var url = hostname + "GetAllPelatihan";
    var method = "GET";

    $.ajax({
        url: url,
        method: method,
        contentType: "application/json",
        success: function (data) {
            // Check if the response data is an array
            if (Array.isArray(data)) {
                // Iterate through each pelatihan in the response
                data.forEach(function (pelatihan, index) {
                    // Fetch additional details for the Tipe_Pelatihan based on id_tipe_pelatihan
                    $.ajax({
                        url: hostname + "GetTipePelatihan?id=" + pelatihan.id_tipe_pelatihan,
                        method: "GET",
                        contentType: "application/json",
                        success: function (tipePelatihanDetails) {
                            // Assuming tipePelatihanDetails contains the necessary data
                            var tipe_pelatihan = tipePelatihanDetails.tipe_pelatihan;

                            // Konversi tanggal_pelatihan ke objek Date
                            var tanggalPelatihan1 = new Date(pelatihan.tanggal_pelatihan_awal);
                            var tanggalPelatihan2 = new Date(pelatihan.tanggal_pelatihan_akhir);
                            tanggalPelatihan1.setDate(tanggalPelatihan1.getDate() + 1);
                            tanggalPelatihan2.setDate(tanggalPelatihan2.getDate() + 1);
                            // Konversi tanggal ke format yang diinginkan
                            var tanggalAwalFinal = tanggalPelatihan1.toISOString().split('T')[0];
                            var tanggalAkhirFinal = tanggalPelatihan2.toISOString().split('T')[0];

                            // Build the table row
                            var newRow = '<tr>' +
                                '<td>' + (index + 1) + '</td>' +
                                '<td>' + pelatihan.nama_pelatihan + '</td>' +
                                '<td>' + tanggalAwalFinal + '</td>' +
                                '<td>' + tanggalAkhirFinal + '</td>' +
                                '<td>' + tipe_pelatihan + '</td>' +
                                '<td>' +
                                '<button class="btn btn-success showPhotoPelatihan" data-id_pelatihan="' + pelatihan.id_pelatihan + '"><i class="fa-regular fa-image"></i></button>' +
                                '<button class="btn btn-primary editPelatihan" data-id_pelatihan="' + pelatihan.id_pelatihan + '"><i class="fas fa-edit"></i></button>' +
                                '<button class="btn btn-danger" value="' + pelatihan.id_pelatihan + '" onclick="hapusPelatihan(this.value)"><i class="fas fa-trash"></i></button>' +
                                '</td>' +
                                '</tr>';

                            // Append the row to the table body
                            $('#tbodyTraining').append(newRow);

                            // Attach event listener for the edit button
                            $('.editPelatihan[data-id_pelatihan="' + pelatihan.id_pelatihan + '"]').click(function () {
                                    $('#summernote').summernote();
                                $('.form-group-edited').remove();
                                var id_pelatihan = $(this).data("id_pelatihan");
                                loadEditPelatihan(id_pelatihan);
                            });
                        },
                        error: function (xhr, status, error) {
                            console.error("Error fetching Tipe_Pelatihan details:", error);
                        }
                    });
                });
            } else {
                console.error("Invalid data format");
            }
        },
        error: function (xhr, status, error) {
            console.error("Error:", error);
        }
    });
}



function simpanPelatihan() {
    var nama_pelatihan = document.getElementById("nama_pelatihan").value;
    var tanggal_pelatihan_awal = document.getElementById("tanggal_pelatihan_awal").value;
    var tanggal_pelatihan_akhir = document.getElementById("tanggal_pelatihan_akhir").value;
    var id_tipe_pelatihan = document.getElementById("id_tipe_pelatihan").value;
    var deskripsi_pelatihan = document.getElementsByName("deskripsi_pelatihan")[0].value;
    var status = document.getElementById("status_pelatihan").value;

    // Validasi tanggal akhir harus lebih besar dari tanggal awal
    if (new Date(tanggal_pelatihan_akhir) < new Date(tanggal_pelatihan_awal)) {
        Swal.fire({
            icon: 'error',
            title: 'Invalid Date Input',
            text: "End Date can't be less than the Start Date.",
        });
        return; // Hentikan eksekusi jika validasi gagal
    }

    var id_pengajar = document.getElementById("id_pengajar").value;

    var pengajarArray = [];
    pengajarArray.push(id_pengajar);
    $('.form-group-added').each(function (index, row) {
        var id_pengajar_clone = $(row).find('select').val();

        // Check if id_pengajar_clone is not undefined or null before adding to array
        if (id_pengajar_clone !== undefined && id_pengajar_clone !== null) {
            var rowData = id_pengajar_clone;
            pengajarArray.push(rowData); // Menambahkan data ke dalam array
        }
    });

    var fotoPaths = [];

    var fileInputs = [
        document.getElementById("photoPelatihan1"),
        document.getElementById("photoPelatihan2"),
        document.getElementById("photoPelatihan3"),
        document.getElementById("photoPelatihan4"),
        document.getElementById("photoPelatihan5")
    ];

    fileInputs.forEach(function (fileInput) {
        var file = fileInput.files[0];
        if (file) {
            var uniqueFileName = guid(32, file) + "_" + getFileNameFromPath(fileInput.value);
            fotoPaths.push(uniqueFileName);
        }
    });

    var hostname = "https://localhost:7033/";
    var url = hostname + "InsertPelatihan";
    var method = "POST";

    // Data yang akan dikirim
    var pelatihanData = {
        nama_pelatihan: nama_pelatihan,
        tanggal_pelatihan_awal: tanggal_pelatihan_awal,
        tanggal_pelatihan_akhir: tanggal_pelatihan_akhir,
        id_tipe_pelatihan: id_tipe_pelatihan,
        deskripsi_pelatihan: deskripsi_pelatihan,
        status: status
    };
            if(nama_pelatihan == '' || tanggal_pelatihan_awal == '' || tanggal_pelatihan_akhir == '' || id_tipe_pelatihan == '' || deskripsi_pelatihan == '' || fileInputs[0] == null || pengajarArray == null){
            Swal.fire({
                icon: 'error',
                title: 'Warning!',
                text: 'Please fill in all fields!',
            });
            return; 
        }
    // Kirim permintaan AJAX untuk menyimpan data pelatihan dan foto-fotonya secara terpisah
        if (fileInputs.length != 0) {
        uploadPhoto3(fileInputs, function (uniqueFileNames) {
            // Menggunakan nama file unik yang dihasilkan oleh GUID
            pelatihanData.fotoPaths = uniqueFileNames;

            $.ajax({
                url: url,
                method: method,
                contentType: "application/json",
                data: JSON.stringify(pelatihanData),
                success: function (data) {
                    console.log("Data pelatihan berhasil disimpan:", data);
                    detailPengajarPelatihan(pengajarArray);
                    location.reload(); // Opsional: Jika Anda ingin memuat ulang halaman
                },
                error: function (xhr, status, error) {
                    console.error(xhr.responseText);
                    // Tangani error jika diperlukan
                }
            });
        });
    } else {
        // Jika foto_pelatihan null, langsung menyimpan data tanpa mengunggah foto
        saveData();
    }
}      

        function uploadPhoto3(fileInputs, callback) {
        var url = '/DPP/UploadPhoto';
        var uniqueFileNames = []; // Array to store unique filenames

        var filesToUpload = fileInputs.filter(function (fileInput) {
            return fileInput.files[0]; // Filter hanya file yang dipilih oleh pengguna
        });

        var uploadedCount = 0;

        filesToUpload.forEach(function (fileInput) {
            var file = fileInput.files[0];
                    var maxSize = 7 * 1024 * 1024; // 10 MB

        // Pengecekan ukuran file
        if (file.size > maxSize) {
            Swal.fire({
                icon: 'warning',
                title: 'File Size Exceeded',
                text: 'File size should not exceed 7 MB.'
            });
            // Tidak melanjutkan proses upload jika ukuran file melebihi batas
            location.reload();
        }
            var formData = new FormData();
            var uniqueFileName = guid(32, file) + "_" + file.name; // Menggunakan GUID panjang 32 karakter
            uniqueFileNames.push(uniqueFileName); // Store the unique filename
            formData.append('foto', file, uniqueFileName);

            $.ajax({
                url: url,
                method: 'POST',
                contentType: false,
                processData: false,
                data: formData,
                success: function (response) {
                    console.log("Foto berhasil diunggah:", response);
                    uploadedCount++;

                    // Trigger callback setelah semua file diunggah
                    if (uploadedCount === filesToUpload.length) {
                        callback(uniqueFileNames.join(',')); // Convert array to a comma-separated string
                        sendPhotoPelatihan(uniqueFileNames);
                    }
                },
                error: function (xhr, status, error) {
                    console.error("Error uploading photo:", error);
                    // Handle errors if needed
                }
            });
        });
    }

    function sendPhotoPelatihan(photoPaths) {
        var hostname = 'https://localhost:7033/'; // Ganti dengan URL untuk mengunggah foto
        var url = hostname + "SendPhotoPelatihan";

        var fotoPelatihanArray = [];

        photoPaths.forEach(function (photoPath) {
            var fotoPelatihan = {
                path_foto_pelatihan: photoPath,
                status: 1 // Atur status yang sesuai jika diperlukan
            };

            fotoPelatihanArray.push(fotoPelatihan);
        });

        $.ajax({
            url: url,
            method: "POST",
            contentType: "application/json",
            data: JSON.stringify(fotoPelatihanArray),
            success: function (data) {
                console.log("Foto pelatihan berhasil diunggah:", data);
            },
            error: function (xhr, status, error) {
                alert('error add foto')
                console.error("Error uploading photo pelatihan:", error);
                // Handle error
            }
        });
    }

    function detailPengajarPelatihan(pengajarArray) {
    var hostname = 'https://localhost:7033/';
        var url = hostname + "InsertPengajarPelatihan";
    var dataDropdown = [];


    // Mengambil nilai dari setiap dropdown yang ditambahkan
    pengajarArray.forEach(function (pengajar) {
        var pengajarId = {
            id_pengajar: pengajar
        };
        dataDropdown.push(pengajarId);
    });
    
    $.ajax({
        url: url,
        method: "POST",
        contentType: "application/json",
        data: JSON.stringify(dataDropdown),
        success: function (response) {
            // Handle response dari server jika diperlukan
            console.log('Data berhasil dikirim ke database', response);
        },
        error: function (xhr, status, error) {
            // Tangani kesalahan jika ada
            console.error('Terjadi kesalahan:', error);
        }
    });
}

    function hapusPelatihan(id) {
        Swal.fire({
            title: 'Are you sure?',
            text: 'You won\'t be able to revert this!',
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Yes, delete it!'
        }).then((result) => {
            if (result.isConfirmed) {
                performDeletion3(id);
            }
        });

        function performDeletion3(id) {
            var hostname = "https://localhost:7033/";
            var url = hostname + "DeletePelatihan?id=" + id;
            var method = "POST";
            $.ajax({
                url: url,
                method: method,
                contentType: "application/json",
                success: function (data) {
                    Swal.fire(
                        'Deleted!',
                        'Your data has been deleted.',
                        'success'
                    ).then(() => {
                        location.reload(); // Reload the page after deletion
                    });
                },
                error: function (xhr, status, error) {
                    console.error("Error:", error);
                    Swal.fire(
                        'Error!',
                        'Failed to delete data.',
                        'error'
                    );
                }
            });
        }
    }


    function loadEditPelatihan(id_pelatihan) {
        var hostname = "https://localhost:7033/";
        var url = hostname + "GetPelatihan?id=" + id_pelatihan;
        var method = "GET";
        var elements = document.getElementsByName("editdeskripsi_pelatihan")[0];

        loadEditPengajarPelatihan(id_pelatihan);

        $.ajax({
            url: url,
            method: method,
            contentType: "application/json",
            success: function (data) {
                var pelatihan = data;
                $.ajax({
                    url: hostname + "GetTipePelatihan?id=" + pelatihan.id_tipe_pelatihan,
                    method: "GET",
                    contentType: "application/json",
                    success: function (tipePelatihanDetails) {
                        var tipe_pelatihan = tipePelatihanDetails.tipe_pelatihan;
                // Destroy Summernote before changing content
                $('#editdeskripsi_pelatihan').summernote('destroy');

                // Set values for other fields
                $('#editid_pelatihan').val(pelatihan.id_pelatihan);
                $('#editnama_pelatihan').val(pelatihan.nama_pelatihan);
                var date1 = new Date(pelatihan.tanggal_pelatihan_awal);
                date1.setDate(date1.getDate() + 1);
                var formattedDate1 = date1.toISOString().split('T')[0];
                var date2 = new Date(pelatihan.tanggal_pelatihan_akhir);
                date2.setDate(date2.getDate() + 1);
                var formattedDate2 = date2.toISOString().split('T')[0];
                $('#edittanggal_pelatihan_awal').val(formattedDate1);
                $('#edittanggal_pelatihan_akhir').val(formattedDate2);
                        $('#editid_tipe_pelatihan').val(tipe_pelatihan);

                // Set HTML content using innerHTML
                elements.innerHTML = pelatihan.deskripsi_pelatihan;

                // Initialize Summernote again
                $('#editdeskripsi_pelatihan').summernote();

                $('#editstatus_pelatihan').val(pelatihan.status);

                // Show the modal
                $('#editPelatihanModal').modal('show');
            },
            error: function (xhr, status, error) {
                console.error("Error:", error);
                            }
        });
            }
        });
    }

    function loadEditPengajarPelatihan(id_pelatihan) {
        var hostname = "https://localhost:7033/";
        var url = hostname + "GetPengajarPelatihan?id=" + id_pelatihan;
        var method = "GET";

        // Assuming populateEditFacultyMembersinPelatihan is a function that sets up the initial state
        populateEditFacultyMembersinPelatihan();

        $.ajax({
            url: url,
            method: method,
            contentType: "application/json",
            success: function (data) {
                var pengajarList = data;

                // Clear the content inside the span
                $('#editid_pengajar').empty();


                // Assuming 'fotoPelatihan' is a variable that should be 'pengajarList'
                $.each(pengajarList, function (index, pengajarItem) {
                    // Assuming 'fotoHtml' is a variable that should be 'optionHtml'
                    var spanContent = (index + 1) + '. ' + '<span data-value="' + pengajarItem.id_pengajar + '">' + pengajarItem.nama_pengajar + '</span><br/>';

                    // Append the span content
                    $('#editid_pengajar').append(spanContent);
                    $('#editbidang_keahlian').val(pengajarItem.bidang_keahlian);
                });
            }
        });
    }



    function updatePelatihan() {
        var id_pelatihan = document.getElementById("editid_pelatihan").value;
        var nama_pelatihan = document.getElementById("editnama_pelatihan").value;
        var tanggal_pelatihan_awal = document.getElementById("edittanggal_pelatihan_awal").value;
        var tanggal_pelatihan_akhir = document.getElementById("edittanggal_pelatihan_akhir").value;
        var deskripsi_pelatihan = document.getElementsByName("editdeskripsi_pelatihan")[0].value;
        var status = document.getElementById("editstatus_pelatihan").value;

        var hostname = "https://localhost:7033/";
        var url = hostname + "UpdatePelatihan";
        var method = "POST";
        var input = {
            id_pelatihan: id_pelatihan,
            nama_pelatihan: nama_pelatihan,
            tanggal_pelatihan_awal: tanggal_pelatihan_awal,
            tanggal_pelatihan_akhir: tanggal_pelatihan_akhir,
            deskripsi_pelatihan: deskripsi_pelatihan,
            status: status
        };
            if(nama_pelatihan == '' || tanggal_pelatihan_awal == '' || tanggal_pelatihan_akhir == '' || deskripsi_pelatihan == ''){
            Swal.fire({
                icon: 'error',
                title: 'Warning!',
                text: 'Please fill in all fields!',
            });
            return; 
        }
        $.ajax({
            url: url,
            method: method,
            data: JSON.stringify(input),
            contentType: "application/json",
            success: function (data) {
                console.log("Data pelatihan berhasil diperbarui:", data);
                $('#editPelatihanModal').modal('hide');
                location.reload(); // Opsional: Jika ingin memuat ulang halaman setelah update
            },
            error: function (xhr, status, error) {
                console.error("Gagal memperbarui data pelatihan. Kesalahan:", error);
                console.error("Respons server:", xhr.responseText);
                // Tangani error dengan lebih baik
            }
        });
    }


    $('.addPelatihan').click(function () {
        $('#deskripsi_pelatihan').summernote('destroy');
        $('#deskripsi_pelatihan').summernote();
        $('.form-group-added').remove();
        $("#addPelatihanModal").modal("show");
    });
    $(document).ready(function () {
        // Event listener untuk menampilkan foto Pelatihan ketika tombol showPhotoPelatihan ditekan
        $(document).on('click', '.showPhotoPelatihan', function () {
            var pelatihanId = $(this).data('id_pelatihan'); // Mendapatkan id_pelatihan dari atribut data
            var hostname = "https://localhost:7033/";
            var url = hostname + "GetPhotoPelatihan?id=" + pelatihanId;
            var method = "GET";

            // Ajax request untuk mendapatkan foto Pelatihan berdasarkan id_pelatihan
            $.ajax({
                url: url,
                method: method,
                contentType: "application/json",
                success: function (data) {
                    // Jika panggilan berhasil, data akan berisi daftar foto Pelatihan
                    var fotoPelatihan = data;

                    // Kosongkan konten sebelum menambahkan data baru
                    $("#showFotoPelatihan").empty();

                    // Perulangan untuk menampilkan path_foto_pelatihan ke dalam modal pop-up
                    $.each(fotoPelatihan, function (index, foto) {
                        // Tambahkan data path_foto_pelatihan ke dalam elemen div di dalam modal pop-up
                        var fotoHtml = '<div class="foto-item">' +
                            '<p>Photo Pelatihan ' + (index + 1) + '</p>' +
                            '<img src="/assets/img/' + foto.path_foto_pelatihan + '" alt="Foto Pelatihan" width="70" height="70">' +
                            '</div>';
                        $("#showFotoPelatihan").append(fotoHtml);
                    });

                    // Tampilkan modal pop-up setelah mendapatkan dan menambahkan foto Pelatihan
                    $('#showPhotoPelatihanModal').modal('show');
                },
                error: function (xhr, status, error) {
                    // Tangani kesalahan jika panggilan gagal
                    console.error(error);
                }
            });
        });
    });
    $(document).on('change', '#bidang_keahlian', function () {
        var selectedBidangKeahlian = $(this).val();
        console.log(selectedBidangKeahlian);
        populateFacultyMembers(selectedBidangKeahlian);
        loadTipePelatihanOptions(selectedBidangKeahlian);
    });

        $(document).on('change', '#editbidang_keahlian', function () {
        var selectedBidangKeahlian = $(this).val();
                            $('#editid_tipe_pelatihan').val(selectedBidangKeahlian);
    });

function populateFacultyMembers(bidang_keahlian) {
    var hostname = "https://localhost:7033/";
    var url = hostname + "GetAllFacultyMembersbyBK?bidang_keahlian=" + bidang_keahlian;
        var dropdown = $('#id_pengajar');

        // Remove all existing options before adding new ones
        dropdown.empty();

        // Add a default option
        dropdown.append($('<option></option>').text('Select Faculty Member'));
    if(bidang_keahlian != null){
    $.ajax({
        url: url,
        method: "GET",
        contentType: "application/json",
        success: function (data) {
            var facultyMembers = data.data;
            // Get the dropdown list element


            // Add the list of faculty members to the dropdown list
            facultyMembers.forEach(function (pengajar) {
                dropdown.append($('<option></option>').attr('value', pengajar.id_pengajar).text(pengajar.nama_pengajar));
            });
        },
        error: function (xhr, status, error) {
            console.error("Error fetching FacultyMembers:", error);
            // Handle errors if any
        }

    });
        }
}

    function populateEditFacultyMembersinPelatihan(bidang_keahlian) {
        var hostname = "https://localhost:7033/";
         var url = hostname + "GetAllFacultyMembersbyBK?bidang_keahlian=" + bidang_keahlian;

        $.ajax({
            url: url,
            method: "GET",
            contentType: "application/json",
            success: function (data) {
                var facultyMembers = data.data;

                // Mendapatkan elemen dropdown list
                var dropdown = $('#editid_pengajar');

                // Menghapus semua opsi sebelum menambahkan opsi yang baru
                dropdown.empty();
                // Menambahkan opsi default
                dropdown.append($('<option></option>').text('Select Faculty Member'));

                // Menambahkan daftar FacultyMember ke dalam dropdown list
                facultyMembers.forEach(function (pengajar) {
                    dropdown.append($('<option></option>').attr('value', pengajar.id_pengajar).text(pengajar.nama_pengajar));
                });
            },
            error: function (xhr, status, error) {
                console.error("Error fetching FacultyMembers:", error);
                // Tangani error jika ada
            }
        });
    }

    // Panggil fungsi untuk mengisi dropdown list saat halaman dimuat
        populateFacultyMembers();
        populateEditFacultyMembersinPelatihan();

    function tambahDropdownadd() {
        var dropdownClone = $('#id_pengajar').clone(); // Clone dropdown
        dropdownClone.removeAttr('id'); // Hapus atribut 'id' dari dropdown clone

        // Tambahkan dropdown clone beserta tombol hapusnya
        $('#form-group-add').last().after(
            `<div class="form-group-added row mb-3">
                    <div class="col-sm-10">
                        ${dropdownClone[0].outerHTML}
                    </div>
                    <div class="col-sm-2">
                        <button type="button" class="btn btn-danger" onclick="hapusDropdownadd(this)">Delete</button>
                    </div>
                </div>`
        );
    }

    function hapusDropdownadd(btn) {
        $(btn).closest('.form-group-added').remove(); // Hapus dropdown terkait dengan tombol hapus yang ditekan
    }


    function loadTipePelatihanOptions(bidang_keahlian) {
        var hostname = "https://localhost:7033/";
        var url = hostname + "GetAllTipePelatihanbyBK?bidang_keahlian=" + bidang_keahlian; // Sesuaikan dengan endpoint Anda
        var method = "GET";
                        $('#id_tipe_pelatihan').empty();
                $('#editid_tipe_pelatihan').empty();
                $('#id_tipe_pelatihan').append($('<option></option>').text('Select Type of Training'));
                $('#editid_tipe_pelatihan').append($('<option></option>').text('Select Type of Training'));
        if(bidang_keahlian != null){
        $.ajax({
            url: url,
            method: method,
            contentType: "application/json",
            success: function (data) {
                var tipePelatihanList = data;

                // Kosongkan opsi pada elemen <select>


                // Tambahkan opsi dari data tipe_produk
                tipePelatihanList.forEach(function (tipePelatihan) {
                    var option = '<option value="' + tipePelatihan.id_tipe_pelatihan + '">' + tipePelatihan.tipe_pelatihan + '</option>';
                    $('#id_tipe_pelatihan').append(option);
                });
                                tipePelatihanList.forEach(function (tipePelatihan) {
                    var option = '<option value="' + tipePelatihan.id_tipe_pelatihan + '">' + tipePelatihan.tipe_pelatihan + '</option>';
                    $('#editid_tipe_pelatihan').append(option);
                });
            },
            error: function (xhr, status, error) {
                console.error("Error:", error);
            }
        });
        }
    }




    //End Pelatihan DOM JQUERY


    // Buttons

    $('.ourProducts').click(function () {
        $('.tableTraining').hide();
        $('.tableFacilities').hide();
        $('.tableProduct').show(); 
    });


    $('.training').click(function () {
        $('.tableTraining').show(); 
        $('.tableProduct').hide();
        $('.tableFacilities').hide();
    });

    $('.fasilitas').click(function () {
        $('.tableFacilities').show();
        $('.tableProduct').hide();
        $('.tableTraining').hide(); 
    });

</script>


@*Modal Product*@
<div class="modal fade" id="addProductModal" tabindex="-1" role="dialog" aria-labelledby="addProduct" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title" style="font-size: 28px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif">Add New Product</h1>
            </div>
            <div class="modal-body">
                <section class="section">
                    <div class="row">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Please Fill it in Correctly!</h5>
                                <hr />
                                <br />

                                <!-- General Form Elements -->
                                <div class="row mb-3">
                                    <label for="nama_produk" class="col-sm-2 col-form-label">Product Name<span class="text-danger">*</span></label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" name="nama_produk" id="nama_produk">
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <label for="tipe_produk" class="col-sm-2 col-form-label">Product Type<span class="text-danger">*</span></label>
                                    <div class="col-sm-10">
                                        <select class="form-select" name="id_tipe_produk" id="id_tipe_produk">

                                        </select>
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <label for="pesanan" class="col-sm-2 col-form-label">Ordered by<span class="text-danger">*</span></label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" name="pesanan" id="pesanan">
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <label for="deskripsi_produk" class="col-sm-2 col-form-label">Product Description<span class="text-danger">*</span></label>
                                    <div class="col-sm-10">
                                        <textarea class="form-control summernote" name="deskripsi_produk" id="summernote" rows="5"></textarea>
                                    </div>
                                </div>
                                <hr/>
                                <div class="row mb-6">
                                    <label class="col-sm-6 col-form-label">Add Product's Photo (Min 1, Max size each photo 5 MB)</label>
                                </div>
                                <br/>
                                <div class="row mb-3">
                                    <label for="addphoto1" class="col-sm-2 col-form-label">Add Photo 1 (must be in 1:1 ratio)<span class="text-danger">*</span></label>
                                    <div class="col-sm-10">
                                        <input type="file" class="form-control" id="addphoto1" required>
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <label for="addphoto2" class="col-sm-2 col-form-label">Add Photo 2</label>
                                    <div class="col-sm-10">
                                        <input type="file" class="form-control" id="addphoto2">
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <label for="addphoto3" class="col-sm-2 col-form-label">Add Photo 3</label>
                                    <div class="col-sm-10">
                                        <input type="file" class="form-control" id="addphoto3">
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <label for="addphoto4" class="col-sm-2 col-form-label">Add Photo 4</label>
                                    <div class="col-sm-10">
                                        <input type="file" class="form-control" id="addphoto4">
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <label for="addphoto4" class="col-sm-2 col-form-label">Add Photo 5</label>
                                    <div class="col-sm-10">
                                        <input type="file" class="form-control" id="addphoto5">
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-sm-10">
                                        <input class="form-control" id="status" name="status" value="1" hidden />
                                    </div>
                                </div>
                                <br />
                                <br />
                                <div class="row mb-3">
                                    <div class="col-sm-10">
                                        <button type="button" class="btn btn-danger" onclick="cancelProduk()">Cancel</button>
                                        <button type="submit" class="btn btn-primary" onclick="simpanProduk()">Submit</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="editProductModal" tabindex="-1" role="dialog" aria-labelledby="editProductModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title" id="editProductModalLabel" style="font-size: 28px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif">Edit Product</h1>
            </div>
            <div class="modal-body">
                <section class="section">
                    <div class="row">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Please Fill it in Correctly!</h5>
                                <hr />
                                <br />

                                <input type="text" class="form-control" id="editid_produk" hidden>
                                <div class="row mb-3">
                                    <label for="editnama_produk" class="col-sm-2 col-form-label">Product Name<span class="text-danger">*</span></label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" id="editnama_produk" placeholder="Product Name">
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <label for="edittipe_produk" class="col-sm-2 col-form-label">Product Type<span class="text-danger">*</span></label>
                                    <div class="col-sm-10">
                                        <select class="form-select" id="editid_tipe_produk" placeholder="Product Type">

                                        </select>
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <label for="editpesanan" class="col-sm-2 col-form-label">Ordered by<span class="text-danger">*</span></label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" id="editpesanan" placeholder="Ordered by">
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <label for="editdeskripsi_produk" class="col-sm-2 col-form-label">Product Description<span class="text-danger">*</span></label>
                                    <div class="col-sm-10">
                                        <textarea class="form-control" id="editdeskripsi_produk" name="editdeskripsi_produk" rows="5" placeholder="Product Description"></textarea>
                                    </div>
                                </div>
                                <hr/>
                                <div class="row mb-3">
                                    <div class="col-sm-10">
                                        <input class="form-control" id="editstatus_produk" name="editstatus_produk" value="1" hidden />
                                    </div>
                                </div>
                                <br />
                                <br />
                                <div class="row mb-3">
                                    <div class="col-sm-10">
                                        <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
                                        <button type="submit" class="btn btn-primary" onclick="updateProduct()">Save changes</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="showPhotoProductModal" tabindex="-1" role="dialog" aria-labelledby="showPhotoProductModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title" id="showPhotoProductModalLabel" style="font-size: 28px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif">Photo Product</h1>
            </div>
            <div class="modal-body">
                <section class="section">
                    <div class="row">
                        <div class="card">
                            <div class="card-body">
                                <br/>

                                <div id="showFotoProduct">
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>
</div>

@*Modal Product*@




@*Modal Facility*@
<div class="modal fade" id="addFasilitasModal" tabindex="-1" role="dialog" aria-labelledby="addFasilitas" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title" style="font-size: 28px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif">Add New Facility</h1>
            </div>
            <div class="modal-body">
                <section class="section">
                    <div class="row">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Please Fill it in Correctly!</h5>
                                <hr />
                                <br />

                                <!-- General Form Elements -->
                                <div class="row mb-3">
                                    <label for="nama_fasilitas" class="col-sm-2 col-form-label">Facility Name<span class="text-danger">*</span></label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" name="nama_fasilitas" id="nama_fasilitas">
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <label for="id_tipe_fasilitas" class="col-sm-2 col-form-label">Facility Type<span class="text-danger">*</span></label>
                                    <div class="col-sm-10">
                                        <select class="form-select" name="id_tipe_fasilitas" id="id_tipe_fasilitas">

                                        </select>
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <label for="deskripsi_fasilitas" class="col-sm-2 col-form-label">Facility Description<span class="text-danger">*</span></label>
                                    <div class="col-sm-10">
                                        <textarea class="form-control" name="deskripsi_fasilitas" id="deskripsi_fasilitas" rows="5"></textarea>
                                    </div>
                                </div>
                                <hr />
                                <div class="row mb-6">
                                    <label class="col-sm-6 col-form-label">Add Facility's Photo (Min 1, Max size each photo 5 MB)</label>
                                </div>
                                <br />
                                <div class="row mb-3">
                                    <label for="photoFasilitas1" class="col-sm-2 col-form-label">Add Photo 1 (must be in 1:1 ratio) <span class="text-danger">*</span></label>
                                    <div class="col-sm-10">
                                        <input type="file" class="form-control" id="photoFasilitas1" required>
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <label for="photoFasilitas2" class="col-sm-2 col-form-label">Add Photo 2</label>
                                    <div class="col-sm-10">
                                        <input type="file" class="form-control" id="photoFasilitas2">
                                    </div>
                                </div>
                                <!-- Tambahkan input untuk foto-foto yang lain sesuai kebutuhan -->
                                <div class="row mb-3">
                                    <label for="photoFasilitas3" class="col-sm-2 col-form-label">Add Photo 3</label>
                                    <div class="col-sm-10">
                                        <input type="file" class="form-control" id="photoFasilitas3">
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <label for="photoFasilitas4" class="col-sm-2 col-form-label">Add Photo 4</label>
                                    <div class="col-sm-10">
                                        <input type="file" class="form-control" id="photoFasilitas4">
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <label for="photoFasilitas5" class="col-sm-2 col-form-label">Add Photo 5</label>
                                    <div class="col-sm-10">
                                        <input type="file" class="form-control" id="photoFasilitas5">
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-sm-10">
                                        <input class="form-control" id="status_fasilitas" name="status_fasilitas" value=1 hidden />
                                    </div>
                                </div>
                                <br />
                                <br />
                                <div class="row mb-3">
                                    <div class="col-sm-10">
                                        <button type="button" class="btn btn-danger" onclick="cancelFasilitas()">Cancel</button>
                                        <button type="submit" class="btn btn-primary" onclick="simpanFasilitas()">Submit</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>
</div>



<div class="modal fade" id="editFasilitasModal" tabindex="-1" role="dialog" aria-labelledby="editFasilitasModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title" id="editFasilitasModalLabel" style="font-size: 28px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif">Edit Facility</h1>
            </div>
            <div class="modal-body">
                <section class="section">
                    <div class="row">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Please Fill it in Correctly!</h5>
                                <hr />
                                <br />

                                <input type="text" class="form-control" id="editid_fasilitas" hidden>
                                <div class="row mb-3">
                                    <label for="editnama_fasilitas" class="col-sm-2 col-form-label">Facility Name<span class="text-danger">*</span></label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" id="editnama_fasilitas" placeholder="Facility Name">
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <label for="editid_tipe_fasilitas" class="col-sm-2 col-form-label">Facility Type<span class="text-danger">*</span></label>
                                    <div class="col-sm-10">
                                        <select class="form-select" name="editid_tipe_fasilitas" id="editid_tipe_fasilitas">

                                        </select>
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <label for="editdeskripsi_fasilitas" class="col-sm-2 col-form-label">Facility Description<span class="text-danger">*</span></label>
                                    <div class="col-sm-10">
                                        <textarea class="form-control summernote" name="editdeskripsi_fasilitas" id="editdeskripsi_fasilitas" rows="5" placeholder="Facility Description"></textarea>
                                    </div>
                                </div>
                                <hr />
                                <div class="row mb-3">
                                    <div class="col-sm-10">
                                        <input class="form-control" id="editstatus_fasilitas" name="editstatus_fasilitas" value="1" hidden />
                                    </div>
                                </div>
                                <br />
                                <br />
                                <div class="row mb-3">
                                    <div class="col-sm-10">
                                        <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
                                        <button type="submit" class="btn btn-primary" onclick="updateFasilitas()">Save changes</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="showPhotoFasilitasModal" tabindex="-1" role="dialog" aria-labelledby="showPhotoFasilitasModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title" id="showPhotoFasilitasModalLabel" style="font-size: 28px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif">Photo Facility</h1>
            </div>
            <div class="modal-body">
                <section class="section">
                    <div class="row">
                        <div class="card">
                            <div class="card-body">
                                <br />
                                <div id="showFotoFasilitas">
                                    <!-- Konten foto fasilitas akan ditampilkan di sini -->
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>
</div>

@*Modal Facility*@


@*Modal Training*@
<div class="modal fade" id="addPelatihanModal" tabindex="-1" role="dialog" aria-labelledby="addPelatihan" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title" style="font-size: 28px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif">Add New Training</h1>
            </div>
            <div class="modal-body">
                <section class="section">
                    <div class="row">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Please Fill it in Correctly!</h5>
                                <hr />
                                <br />

                                <!-- General Form Elements -->
                                <div class="row mb-3">
                                    <label for="nama_pelatihan" class="col-sm-2 col-form-label">Training Name<span class="text-danger">*</span></label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" name="nama_pelatihan" id="nama_pelatihan">
                                    </div>
                                </div>

                                <!-- Tambahkan input untuk tanggal_pelatihan -->
                                <div class="form-group row mb-6">
                                    <label for="tanggal_pelatihan_awal" class="col-sm-2 col-form-label">Training Start Date<span class="text-danger">*</span></label>
                                    <div class="col-sm-3">
                                        <input type="date" class="form-control" name="tanggal_pelatihan_awal" id="tanggal_pelatihan_awal">
                                    </div>
                                     <label for="tanggal_pelatihan_awal" class="col-sm-2 col-form-label">Training End Date<span class="text-danger">*</span></label>
                                    <div class="col-sm-3">
                                        <input type="date" class="form-control" name="tanggal_pelatihan_akhir" id="tanggal_pelatihan_akhir">
                                    </div>
                                </div>

                                <br />
                                <div class="row mb-3">
                                    <label for="bidang_keahlian" class="col-sm-2 col-form-label">Training Section<span class="text-danger">*</span></label>
                                    <div class="col-sm-10">
                                        <select class="form-select" name="bidang_keahlian" id="bidang_keahlian">
                                            <option>Select Training Section</option>
                                            <option value="Technical">Technical</option>
                                            <option value="Non-Technical">Non-Technical</option>
                                        </select>
                                    </div>
                                </div>

                                <!-- Tambahkan input untuk jenis_pelatihan -->
                                <div class="row mb-3">
                                    <label for="id_tipe_pelatihan" class="col-sm-2 col-form-label">Training Type<span class="text-danger">*</span></label>
                                    <div class="col-sm-10">
                                        <select class="form-select" name="id_tipe_pelatihan" id="id_tipe_pelatihan">

                                        </select>
                                    </div>
                                </div>

                                <!-- Tambahkan input untuk deskripsi_pelatihan -->
                                <div class="row mb-3">
                                    <label for="deskripsi_pelatihan" class="col-sm-2 col-form-label">Training Description<span class="text-danger">*</span></label>
                                    <div class="col-sm-10">
                                        <textarea class="form-control summernote" name="deskripsi_pelatihan" id="deskripsi_pelatihan" rows="5"></textarea>
                                    </div>
                                </div>
                                <hr />
                                <br />
                                <div class="col-sm-2">
                                    <button type="button" class="btn btn-success" onclick="tambahDropdownadd()">+ Add More</button>
                                </div>
                                <div class="form-group row mb-3" id="form-group-add">
                                    <label for="faculty_member" class="col-sm-6 col-form-label">Add Faculty Member for Training (Make sure add it correctly!)<span class="text-danger">*</span></label>
                                    <div class="col-sm-10">
                                        <select class="form-select" name="id_pengajar" id="id_pengajar">
                                            <!-- Opsi Dropdown -->
                                        </select>
                                    </div>
                                </div>
                                <br />
                                <hr />
                                <div class="row mb-6">
                                    <label class="col-sm-6 col-form-label">Add Training's Photo (Min 1, Max size each photo 5 MB)</label>
                                </div>
                                                                <br />
                                <div class="row mb-3">
                                    <label for="photoPelatihan1" class="col-sm-2 col-form-label">Add Photo 1 (must be in 1:1 ratio)<span class="text-danger">*</span></label>
                                    <div class="col-sm-10">
                                        <input type="file" class="form-control" id="photoPelatihan1">
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <label for="photoPelatihan2" class="col-sm-2 col-form-label">Add Photo 2</label>
                                    <div class="col-sm-10">
                                        <input type="file" class="form-control" id="photoPelatihan2">
                                    </div>
                                </div>
                                <!-- Tambahkan input untuk foto-foto yang lain sesuai kebutuhan -->
                                <div class="row mb-3">
                                    <label for="photoPelatihan3" class="col-sm-2 col-form-label">Add Photo 3</label>
                                    <div class="col-sm-10">
                                        <input type="file" class="form-control" id="photoPelatihan3">
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <label for="photoPelatihan4" class="col-sm-2 col-form-label">Add Photo 4</label>
                                    <div class="col-sm-10">
                                        <input type="file" class="form-control" id="photoPelatihan4">
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <label for="photoPelatihan5" class="col-sm-2 col-form-label">Add Photo 5</label>
                                    <div class="col-sm-10">
                                        <input type="file" class="form-control" id="photoPelatihan5">
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-sm-10">
                                        <input class="form-control" id="status_pelatihan" name="status_pelatihan" value=1 hidden>
                                    </div>
                                </div>
                                <br />
                                <br />
                                <div class="row mb-3">
                                    <div class="col-sm-10">
                                        <button type="button" class="btn btn-danger" onclick="cancelPelatihan()">Cancel</button>
                                        <button type="submit" class="btn btn-primary" onclick="simpanPelatihan()">Submit</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="editPelatihanModal" tabindex="-1" role="dialog" aria-labelledby="editPelatihanModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title" id="editPelatihanModalLabel" style="font-size: 28px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif">Edit Training</h1>
            </div>
            <div class="modal-body">
                <section class="section">
                    <div class="row">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Please Fill it in Correctly!</h5>
                                <hr />
                                <br />

                                <input type="text" class="form-control" id="editid_pelatihan" hidden>
                                <div class="row mb-3">
                                    <label for="editnama_pelatihan" class="col-sm-2 col-form-label">Training Name<span class="text-danger">*</span></label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" id="editnama_pelatihan" placeholder="Training Name">
                                    </div>
                                </div>

                                <div class="form-group row mb-6">
                                    <label for="edittanggal_pelatihan_awal" class="col-sm-2 col-form-label">Training Start Date<span class="text-danger">*</span></label>
                                    <div class="col-sm-3">
                                        <input type="date" class="form-control" name="edittanggal_pelatihan_awal" id="edittanggal_pelatihan_awal">
                                    </div>
                                     <label for="tanggal_pelatihan_awal" class="col-sm-2 col-form-label">Training End Date<span class="text-danger">*</span></label>
                                    <div class="col-sm-3">
                                        <input type="date" class="form-control" name="edittanggal_pelatihan_akhir" id="edittanggal_pelatihan_akhir">
                                    </div>
                                </div>
                                                                <br />
                                        <div class="row mb-3">
                                            <label for="editid_tipe_pelatihan" class="col-sm-2 col-form-label">Training Type</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" name="editid_tipe_pelatihan" id="editid_tipe_pelatihan" disabled />
                                            </div>
                                    </div>

                                <div class="row mb-3">
                                    <label for="editdeskripsi_pelatihan" class="col-sm-2 col-form-label">Training Description<span class="text-danger">*</span></label>
                                    <div class="col-sm-10">
                                    <textarea class="form-control" name="editdeskripsi_pelatihan" id="editdeskripsi_pelatihan" rows="10"></textarea>
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <label for="editid_pengajar" class="col-sm-6 col-form-label">Faculty Member for Training (Uneditable)</label>
                                    <div class="col-sm-10">
                                        <span id="editid_pengajar">

                                        </span>
                                    </div>
                                </div>
                                <hr />
                                <div class="row mb-3">
                                    <div class="col-sm-10">
                                        <input class="form-control" id="editstatus_pelatihan" name="editstatus_pelatihan" value=1 hidden />
                                    </div>
                                </div>
                                <br />
                                <br />
                                <div class="row mb-3">
                                    <div class="col-sm-10">
                                        <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
                                        <button type="submit" class="btn btn-primary" onclick="updatePelatihan()">Save changes</button>
                                    </div>
                                </div>
                            </div>
                            </div>
                        </div>
                </section>
                                    </div>
            </div>
        </div>
    </div>

<div class="modal fade" id="showPhotoPelatihanModal" tabindex="-1" role="dialog" aria-labelledby="showPhotoPelatihanModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title" id="showPhotoPelatihanModalLabel" style="font-size: 28px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif">Training Photos</h1>
            </div>
            <div class="modal-body">
                <section class="section">
                    <div class="row">
                        <div class="card">
                            <div class="card-body">
                                <br />
                                <div id="showFotoPelatihan">
                                    <!-- Konten foto pelatihan akan ditampilkan di sini -->
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>
</div>

@*Modal Training*@
